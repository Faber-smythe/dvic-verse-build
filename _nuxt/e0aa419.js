(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{224:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var o=new(n(0).a)},228:function(e,t,n){var content=n(289);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,n(94).default)("4e9efb20",content,!0,{sourceMap:!1})},288:function(e,t,n){"use strict";n(228)},289:function(e,t,n){var o=n(93)(!1);o.push([e.i,'#btnHolder{align-items:center;justify-content:center;display:flex;position:absolute;z-index:5;bottom:25px;left:50vw}#jsonDownloadBtn{border-radius:100px;background:#fff;font-size:1.2rem;cursor:pointer;transition:all .3s ease;padding:8px 12px;border:none}#jsonDownloadBtn:hover{opacity:.7}#devSection{width:calc(100% - 20px);border-bottom:1px solid #fff;color:#000;background:#e6e6e6;font-weight:600;padding:10px}#devSection h3{margin:0;display:flex;justify-content:space-between}#selectionLog{margin:15px 0}#devSection h3,#selectionLog{opacity:.7}#selectionLog .devEntry{font-size:.8rem;margin:7px;display:flex;justify-content:space-between;align-items:center;width:90%}#selectionLog .devEntry:last-of-type{max-width:90%;text-align:right}#devSection i,#devSection select{padding:3px;font-size:.7rem}#devSection .devWarning{color:red}#devSection [data-entry=caption],#devSection [data-entry=url]{background:#fff;border-radius:2px}#devSection select{cursor:pointer;background:transparent}#InterfaceOverlay{position:fixed;width:100%;z-index:10;justify-content:center;pointer-events:none}#InterfaceOverlay,#sideMenu{height:100%;display:flex;flex-direction:column;align-items:center}#sideMenu{position:relative;align-self:flex-start;width:25vw;font-family:roboto,sans-serif;color:#fff;background:#1a1f21;pointer-events:all}#sideMenu #logoLink{display:flex;justify-content:center;align-items:center;margin:20px auto;transition:all .3s ease;cursor:pointer}#sideMenu #logoLink:hover{opacity:.65}#sideMenu #dvicLogo{width:60%}#sideMenu nav{width:80%;font-size:1.2rem;position:relative;margin-top:20px}#sideMenu .scrollbar-track.scrollbar-track-x{display:none!important}.sceneLink{font-weight:400;font-size:1.25em;font-weight:100;text-transform:capitalize;transition:all .2s ease;opacity:1}.sceneLink:hover{cursor:pointer;opacity:.6}.sceneLink.currentScene{text-indent:2em;opacity:1!important}.sceneLink.currentScene:before{content:"> "}#dvic_iframe{width:100%;height:100%}#iframeHolder{position:fixed;top:0;left:0;z-index:10;width:40vw;height:100%;background:#fff;pointer-events:all}#iframeHolder.devMode{left:auto;right:0}#iframeExit{position:fixed;top:0;left:40vw;height:60px;width:60px;display:flex;justify-content:center;align-items:center;background:#fff;cursor:pointer;border-radius:0 50px 50px 0;transition:all .3s ease}#iframeHolder.devMode #iframeExit{left:auto;right:40vw;border-radius:50px 0 0 50px}#iframeExit span{position:absolute;height:3px;width:40px;background:#1a1f21;transition:all .3s ease}#iframeExit span:first-of-type{transform:rotate(45deg)}#iframeExit span:last-of-type{transform:rotate(-45deg)}#iframeExit:hover span:first-of-type{transform:rotate(135deg)}#iframeExit:hover span:last-of-type{transform:rotate(45deg)}#iframeExit:hover{opacity:.5}#panelHolder{width:90%;border-top:1px solid #fff;border-bottom:1px solid #fff;background:hsla(0,0%,100%,.1);max-height:50vh}#panel{transition:all .4s ease;height:100%}#panel.focus-visible,#panel:focus-visible{outline:none}#panel h2{font-size:2rem}#panel h2,#panel p{margin-left:1.5rem}@media screen and (orientation:portrait){#InterfaceOverlay{height:auto}#sideMenu{height:30vh;width:100%;top:0;transition:all .5s ease}#sideMenu.folded{top:calc(25px + 1.5rem - 30vh)}#sideMenu nav{margin:20px 5px 10px;width:85vw;height:20vh;border-bottom:1px solid grey;border-bottom-left-radius:2%}#panelHolder{padding:0!important;margin-top:20px;height:22vh}#panel{padding:3px!important;display:flex;flex-direction:column;justify-content:space-around}#panel h2{font-size:1.1rem;margin:3px}#panel p{font-size:.8rem;margin-left:.1rem}nav .sceneLink{font-size:1rem;margin-left:25px;margin-right:0}#panelHolder{border:none}#menuIcon{font-size:1.4rem;height:1.4rem;width:1.4rem;background:hsla(0,0%,100%,.15);padding:5px;margin:0 30px;border-radius:50px;display:flex;justify-content:center;align-items:center;position:absolute;bottom:10px}#iframeHolder{height:35%;width:100vw;box-shadow:0 10px 20px 12px rgba(0,0,0,.85)}#iframeExit{top:35%;right:0;left:auto;border-radius:0 0 50px 50px}}@media screen and (max-width:1024px) and (orientation:landscape){#sideMenu #logoLink{margin:10px 0}#sideMenu #dvicLogo{width:40%}#panelHolder{padding:3px!important}#panel h2{font-size:1rem;margin:3px}#panel p{font-size:.75rem;margin-left:.1rem}nav .sceneLink{font-size:.7rem}#iframeHolder{width:50vw}#iframeExit{left:50vw}}',""]),e.exports=o},333:function(e,t,n){"use strict";n.r(t);n(173);var o=n(8),r=n(63),c=n(64),d=n(126),l=n(127),f=n(97),v=n(23),m=(n(50),n(51),n(227),n(38),n(39),n(70),n(98)),h=n(350),x=(n(335),n(224)),y=n(101),w=n(336),k=n.n(w),j=function(){var e=Object(o.a)(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k.a.post("/api/update-scene/".concat(t.slug),t);case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();function _(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=Object(f.a)(e);if(t){var r=Object(f.a)(this).constructor;n=Reflect.construct(o,arguments,r)}else n=o.apply(this,arguments);return Object(l.a)(this,n)}}var S=function(e,t,n,desc){var o,r=arguments.length,c=r<3?t:null===desc?desc=Object.getOwnPropertyDescriptor(t,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(v.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,n,desc);else for(var i=e.length-1;i>=0;i--)(o=e[i])&&(c=(r<3?o(c):r>3?o(t,n,c):o(t,n))||c);return r>3&&c&&Object.defineProperty(t,n,c),c},O=function(e){Object(d.a)(l,e);var t,n=_(l);function l(){var e;return Object(r.a)(this,l),(e=n.apply(this,arguments)).foldedMenu=!0,e}return Object(c.a)(l,[{key:"sortedScenes",get:function(){var e=Object.keys(this.map).sort();console.log(e);var t=e.sort();return console.log(t),t}},{key:"testAPI",value:(t=Object(o.a)(regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("clicked"),t={slug:"foo",texture:"foo.jpg",sceneAzimuth:-3.15620192675667,arrows:[{arrowAzimuth:.11615983497745042,targetScene:"foodtech-lab"}],POI:[]},e.next=4,j(t);case 4:n=e.sent,console.log(n);case 6:case"end":return e.stop()}}),e)}))),function(){return t.apply(this,arguments)})},{key:"mounted",value:function(){var nav=this.$refs.nav,e=h.a.init(nav,{alwaysShowTracks:!0});e.track.xAxis.hide(),x.a.$on("change-scene",(function(t){var n=e.getSize();n.container.height===n.content.height?setTimeout((function(){e.track.xAxis.hide(),e.update(),e.track.yAxis.hide()}),50):setTimeout((function(){e.track.xAxis.hide(),e.update(),e.track.yAxis.show()}),50);var o=document.querySelector('nav h3[data-current-scene-slug="'.concat(t,'"]'));e.scrollTo(0,o.offsetTop,400),setTimeout((function(){e.track.xAxis.hide(),e.update()}),50)})),x.a.$on("open-panel",(function(){setTimeout((function(){e.update(),e.track.yAxis.show()}),50)})),x.a.$on("close-panel",(function(){setTimeout((function(){e.update()}),50)}))}},{key:"toggleFold",value:function(){this.foldedMenu=!this.foldedMenu}},{key:"changeScene",value:function(e){x.a.$emit("change-scene",e)}},{key:"closeIframe",value:function(){x.a.$emit("close-iframe")}},{key:"handlePanelEdition",value:function(e){x.a.$emit("edited-panel",e)}},{key:"handleLogEdition",value:function(e){x.a.$emit("edited-log",e)}}]),l}(Object(m.b)(y.a));S([Object(m.c)({type:Object,required:!0})],O.prototype,"map",void 0),S([Object(m.c)({type:Object,required:!0})],O.prototype,"currentScene",void 0),S([Object(m.c)({type:String,required:!0})],O.prototype,"currentSceneSlug",void 0),S([Object(m.c)({type:Object,required:!1})],O.prototype,"iframe",void 0),S([Object(m.c)({type:Object,required:!1})],O.prototype,"panel",void 0),S([Object(m.c)({type:Boolean,required:!0})],O.prototype,"devMode",void 0);var M=O=S([m.a],O),L=(n(288),n(44)),component=Object(L.a)(M,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"InterfaceOverlay"}},[n("div",{class:e.foldedMenu?"folded":"",attrs:{id:"sideMenu"}},[e.devMode?n("section",{attrs:{id:"devSection"}},[n("h3",[n("span",{staticStyle:{"text-transform":"uppercase"}},[e._v(e._s(e.currentSceneSlug))]),n("span",[n("font-awesome-icon",{attrs:{icon:["fas","code"]}}),e._v("\n          Dev Mode")],1)]),e._v(" "),n("div",{attrs:{id:"selectionLog"},on:{input:e.handleLogEdition}})]):e._e(),e._v(" "),n("button",{on:{click:function(t){return e.testAPI(t)}}},[e._v("API TEST")]),e._v(" "),!e.devMode&&e.isLandscape?n("a",{attrs:{id:"logoLink",href:"http://dvic.devinci.fr",title:"DVIC homepage"}},[n("img",{attrs:{id:"dvicLogo",src:"https://dvic.devinci.fr/api/v3/img/full/1580670077631-cGpFB2ZJJpBS9zwzuZtx.png",alt:"dvic logo"}})]):e._e(),e._v(" "),n("div",{ref:"panelHolder",style:(null===e.panel?"border-bottom: none;":"padding: 15px 6px;")+(e.devMode?"margin-top:40px;":"")+(e.isLandscape||e.panel?"":"display:none"),attrs:{id:"panelHolder"}},[e.panel?n("div",{attrs:{id:"panel",contenteditable:e.devMode},on:{input:e.handlePanelEdition}},[n("h2",[e._v(e._s(e.panel.panelContent.title))]),e._v(" "),e._l(e.panel.panelContent.description,(function(p,i){return n("p",{key:"panel-paragraph-"+i},[e._v("\n          "+e._s(p)+"\n        ")])}))],2):e._e()]),e._v(" "),n("nav",{ref:"nav",style:!e.isLandscape&&e.panel?"display:none":""},e._l(e.sortedScenes,(function(t,i){return n("h3",{key:"link-to-"+t,class:"sceneLink "+(t===e.currentSceneSlug?"currentScene":""),attrs:{"data-current-scene-slug":t},on:{click:function(n){return e.changeScene(t)}}},[n("a",[e._v(e._s(e.map[t].name))])])})),0),e._v(" "),e.isLandscape?e._e():n("div",{attrs:{id:"menuIcon"},on:{click:function(){e.toggleFold()}}},[n("i",{staticClass:"fas fa-ellipsis-v"})]),e._v(" "),e.iframe?n("div",{class:e.devMode?"devMode":"",attrs:{id:"iframeHolder"}},[n("iframe",{attrs:{id:"dvic_iframe",allowfullscreen:"",frameborder:"0",src:e.iframe.targetUrl}}),e._v(" "),n("div",{attrs:{id:"iframeExit",title:"close"},on:{click:function(t){return e.closeIframe()}}},[n("span"),e._v(" "),n("span")])]):e._e()])])}),[],!1,null,null,null);t.default=component.exports}}]);